I used Selenium web driver with java for my automation, Testng for my reporting.
The Base test file class contains the code for screenshots, The listener class contains the code to listen for a test failure
